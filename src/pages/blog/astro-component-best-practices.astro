---
import BlogLayout from "../../layouts/BlogLayout.astro";
import Card from "../../components/ui/Card.astro";
import SectionTitle from "../../components/ui/SectionTitle.astro";
import ServiceCard from "../../components/ui/ServiceCard.astro";
import AccordionItem from "../../components/ui/AccordionItem.astro";

// å¯¼å…¥å›¾ç‰‡èµ„æº
import icon4 from "../../assets/icon4.svg";
import icon5 from "../../assets/icon5.svg";
import icon6 from "../../assets/icon6.svg";

const blogData = {
  title: "Astro ç»„ä»¶å¼€å‘æœ€ä½³å®è·µ",
  pubDate: new Date("2024-01-18"),
  author: "Tech Team",
  authImage: "/blog/image1.png",
  image: "image1.png",
  tags: ["Astro", "å¼€å‘", "ç»„ä»¶"],
  summary: "å­¦ä¹ å¦‚ä½•åˆ›å»ºå¯é‡ç”¨ã€é«˜æ€§èƒ½çš„ Astro ç»„ä»¶ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚",
  type: "Article"
};

// æœ€ä½³å®è·µæ•°æ®
const bestPractices = [
  {
    index: 1,
    titleTop: "ç»„ä»¶",
    titleBottom: "å¯é‡ç”¨æ€§",
    img: icon4,
    alt: "å¯é‡ç”¨ç»„ä»¶å›¾æ ‡",
    link: "#reusability"
  },
  {
    index: 2,
    titleTop: "æ€§èƒ½",
    titleBottom: "ä¼˜åŒ–ç­–ç•¥",
    img: icon5,
    alt: "æ€§èƒ½ä¼˜åŒ–å›¾æ ‡",
    link: "#performance"
  },
  {
    index: 3,
    titleTop: "ç±»å‹",
    titleBottom: "å®‰å…¨ä¿éšœ",
    img: icon6,
    alt: "ç±»å‹å®‰å…¨å›¾æ ‡",
    link: "#type-safety"
  }
];

// å¼€å‘æŠ€å·§æ•°æ®
const developmentTips = [
  {
    index: 1,
    title: "Props æ¥å£å®šä¹‰",
    description: "ä½¿ç”¨ TypeScript æ¥å£å®šä¹‰ç»„ä»¶ propsï¼Œæä¾›æ›´å¥½çš„å¼€å‘ä½“éªŒå’Œç±»å‹æ£€æŸ¥ã€‚ç¡®ä¿æ‰€æœ‰å¿…éœ€çš„å±æ€§éƒ½æœ‰æ˜ç¡®çš„ç±»å‹å®šä¹‰ã€‚"
  },
  {
    index: 2,
    title: "é»˜è®¤å€¼å¤„ç†",
    description: "ä¸ºç»„ä»¶ props æä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œä½¿ç»„ä»¶æ›´å®¹æ˜“ä½¿ç”¨ã€‚ä½¿ç”¨è§£æ„èµ‹å€¼å’Œé»˜è®¤å‚æ•°æ¥ç®€åŒ–ä»£ç ã€‚"
  },
  {
    index: 3,
    title: "æ ·å¼å°è£…",
    description: "ä½¿ç”¨ Astro çš„ scoped styles æˆ– CSS modules æ¥é¿å…æ ·å¼å†²çªã€‚ä¿æŒç»„ä»¶æ ·å¼çš„ç‹¬ç«‹æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚"
  },
  {
    index: 4,
    title: "æ€§èƒ½è€ƒè™‘",
    description: "åˆç†ä½¿ç”¨å®¢æˆ·ç«¯ JavaScriptï¼Œä¼˜å…ˆè€ƒè™‘æœåŠ¡ç«¯æ¸²æŸ“ã€‚åªåœ¨å¿…è¦æ—¶æ·»åŠ äº¤äº’æ€§ï¼Œä¿æŒç»„ä»¶çš„è½»é‡çº§ç‰¹æ€§ã€‚"
  },
  {
    index: 5,
    title: "æ–‡æ¡£ç¼–å†™",
    description: "ä¸ºç»„ä»¶ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹ã€‚åŒ…æ‹¬ props è¯´æ˜ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œã€‚"
  },
  {
    index: 6,
    title: "æµ‹è¯•ç­–ç•¥",
    description: "ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•æ¥ç¡®ä¿ç»„ä»¶çš„ç¨³å®šæ€§ã€‚ä½¿ç”¨é€‚å½“çš„æµ‹è¯•å·¥å…·å’Œæ–¹æ³•æ¥éªŒè¯ç»„ä»¶åŠŸèƒ½ã€‚"
  }
];
---

<BlogLayout {...blogData}>
  <!-- æ–‡ç« å¼•è¨€ -->
  <div class="mb-12">
    <p class="text-xl leading-relaxed text-dark font-light">
      Astro ä½œä¸ºç°ä»£å‰ç«¯æ¡†æ¶ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„ç»„ä»¶åŒ–å¼€å‘èƒ½åŠ›ã€‚
      æœ¬æ–‡å°†åˆ†äº«ä¸€äº›å®ç”¨çš„æœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ åˆ›å»ºæ›´å¥½çš„ Astro ç»„ä»¶ã€‚
    </p>
  </div>

  <!-- æ ¸å¿ƒæ¦‚å¿µéƒ¨åˆ† -->
  <div class="my-16">
    <SectionTitle 
      sectionTitle="æ ¸å¿ƒå¼€å‘ç†å¿µ" 
      description="æŒæ¡è¿™äº›æ ¸å¿ƒæ¦‚å¿µï¼Œè®©ä½ çš„ Astro ç»„ä»¶å¼€å‘æ›´åŠ é«˜æ•ˆ"
    />
    
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12">
      {bestPractices.map((practice) => (
        <ServiceCard {...practice} />
      ))}
    </div>
  </div>

  <!-- è¯¦ç»†å†…å®¹ -->
  <div class="space-y-12">
    <h2 id="reusability">ç»„ä»¶å¯é‡ç”¨æ€§è®¾è®¡</h2>
    
    <p>
      å¯é‡ç”¨æ€§æ˜¯ç»„ä»¶åŒ–å¼€å‘çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ç»„ä»¶åº”è¯¥èƒ½å¤Ÿåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼Œ
      è€Œä¸éœ€è¦ä¿®æ”¹å…¶å†…éƒ¨å®ç°ã€‚
    </p>

    <!-- ä»£ç ç¤ºä¾‹ -->
    <Card isUnderline={true}>
      <div class="bg-slate-800 text-white p-6 rounded-[45px] border border-slate-600">
        <h4 class="text-white text-lg font-semibold mb-4">ğŸ”§ ç»„ä»¶æ¥å£è®¾è®¡ç¤ºä¾‹</h4>
        <pre class="text-emerald-300 text-sm overflow-x-auto bg-slate-900 p-4 rounded-lg font-mono leading-relaxed"><code>---
// å®šä¹‰æ¸…æ™°çš„ Props æ¥å£
export interface Props &#123;
  title: string;
  description?: string;
  variant?: 'primary' | 'secondary' | 'accent';
  size?: 'small' | 'medium' | 'large';
  isDisabled?: boolean;
  onClick?: () => void;
&#125;

// æä¾›é»˜è®¤å€¼
const &#123;
  title,
  description = '',
  variant = 'primary',
  size = 'medium',
  isDisabled = false,
  onClick
&#125; = Astro.props;
---</code></pre>
      </div>
    </Card>

    <h2 id="performance">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
    
    <p>
      Astro çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶"Islands Architecture"ï¼Œå…è®¸æˆ‘ä»¬é€‰æ‹©æ€§åœ°æ·»åŠ äº¤äº’æ€§ã€‚
      ç†è§£ä½•æ—¶ä½¿ç”¨å®¢æˆ·ç«¯ JavaScript æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ã€‚
    </p>

    <!-- æ€§èƒ½å¯¹æ¯” -->
    <div class="grid md:grid-cols-2 gap-8 my-12">
      <Card isUnderline={true}>
        <div class="p-6 bg-background rounded-[45px] border border-accent">
          <h4 class="text-primary font-bold text-lg mb-4">âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4>
          <ul class="text-primary space-y-3">
            <li class="flex items-start gap-3">
              <span class="text-accent font-bold">â€¢</span>
              <span>ä¼˜å…ˆä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-accent font-bold">â€¢</span>
              <span>æŒ‰éœ€åŠ è½½å®¢æˆ·ç«¯è„šæœ¬</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-accent font-bold">â€¢</span>
              <span>ä½¿ç”¨ Astro çš„å†…ç½®ä¼˜åŒ–</span>
            </li>
            <li class="flex items-start gap-3">
              <span class="text-accent font-bold">â€¢</span>
              <span>åˆç†ä½¿ç”¨å›¾ç‰‡ä¼˜åŒ–</span>
            </li>
          </ul>
        </div>
      </Card>
      
      <Card isUnderline={true}>
        <div class="p-6 bg-gray rounded-[45px] border border-primary">
          <h4 class="text-primary font-bold text-lg mb-4">ğŸ“Š æ€§èƒ½æŒ‡æ ‡</h4>
          <div class="space-y-3">
            <div class="flex justify-between items-center">
              <span class="text-dark">é¦–å±åŠ è½½æ—¶é—´</span>
              <span class="bg-accent px-3 py-1 rounded-full text-sm font-medium text-white">&lt; 1s</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-dark">JavaScript åŒ…å¤§å°</span>
              <span class="bg-accent px-3 py-1 rounded-full text-sm font-medium text-white">&lt; 50KB</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-dark">Lighthouse åˆ†æ•°</span>
              <span class="bg-accent px-3 py-1 rounded-full text-sm font-medium text-white">> 95</span>
            </div>
          </div>
        </div>
      </Card>
    </div>

    <!-- å®¢æˆ·ç«¯äº¤äº’ç¤ºä¾‹ -->
    <Card isUnderline={true}>
      <div class="bg-slate-800 text-white p-6 rounded-[45px] border border-slate-600">
        <h4 class="text-white text-lg font-semibold mb-4">ğŸ¯ å®¢æˆ·ç«¯äº¤äº’ç¤ºä¾‹</h4>
        <pre class="text-emerald-300 text-sm overflow-x-auto bg-slate-900 p-4 rounded-lg font-mono leading-relaxed"><code>---
// åªåœ¨éœ€è¦æ—¶æ·»åŠ å®¢æˆ·ç«¯æŒ‡ä»¤
---

&lt;button class="interactive-button" data-action="toggle"&gt;
  ç‚¹å‡»æˆ‘
&lt;/button&gt;

&lt;script&gt;
  // è½»é‡çº§çš„å®¢æˆ·ç«¯è„šæœ¬
  document.addEventListener('DOMContentLoaded', () =&gt; &#123;
    const buttons = document.querySelectorAll('[data-action="toggle"]');
    buttons.forEach(button =&gt; &#123;
      button.addEventListener('click', () =&gt; &#123;
        button.classList.toggle('active');
      &#125;);
    &#125;);
  &#125;);
&lt;/script&gt;</code></pre>
      </div>
    </Card>

    <h2 id="type-safety">ç±»å‹å®‰å…¨ä¿éšœ</h2>
    
    <p>
      TypeScript ä¸º Astro ç»„ä»¶æä¾›äº†å¼ºå¤§çš„ç±»å‹æ£€æŸ¥èƒ½åŠ›ï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨å¼€å‘é˜¶æ®µå‘ç°æ½œåœ¨é—®é¢˜ï¼Œ
      æé«˜ä»£ç è´¨é‡å’Œç»´æŠ¤æ€§ã€‚
    </p>

    <!-- TypeScript ç¤ºä¾‹ -->
    <Card isUnderline={true}>
      <div class="bg-indigo-50 p-6 rounded-[45px] border-l-4 border-indigo-500">
        <h4 class="text-indigo-800 font-bold text-lg mb-4">ğŸ’¡ TypeScript æœ€ä½³å®è·µ</h4>
        <ul class="text-indigo-700 space-y-2">
          <li>â€¢ ä¸ºæ‰€æœ‰ props å®šä¹‰æ˜ç¡®çš„ç±»å‹</li>
          <li>â€¢ ä½¿ç”¨è”åˆç±»å‹é™åˆ¶å¯é€‰å€¼</li>
          <li>â€¢ åˆ©ç”¨æ³›å‹æé«˜ç»„ä»¶çµæ´»æ€§</li>
          <li>â€¢ é…ç½®ä¸¥æ ¼çš„ TypeScript è§„åˆ™</li>
        </ul>
      </div>
    </Card>
  </div>

  <!-- å¼€å‘æŠ€å·§éƒ¨åˆ† -->
  <div class="my-16">
    <SectionTitle 
      sectionTitle="å®ç”¨å¼€å‘æŠ€å·§" 
      description="è¿™äº›æŠ€å·§å°†å¸®åŠ©ä½ æ›´é«˜æ•ˆåœ°å¼€å‘ Astro ç»„ä»¶"
    />
    
    <div class="mt-12 space-y-4">
      {developmentTips.map((tip) => (
        <AccordionItem
          index={tip.index}
          title={tip.title}
          description={tip.description}
        />
      ))}
    </div>
  </div>

  <!-- å®é™…æ¡ˆä¾‹éƒ¨åˆ† -->
  <div class="my-16">
    <h2>å®é™…æ¡ˆä¾‹ï¼šåˆ›å»ºä¸€ä¸ªé€šç”¨å¡ç‰‡ç»„ä»¶</h2>
    
    <p>
      è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…æ¡ˆä¾‹æ¥æ¼”ç¤ºå¦‚ä½•åº”ç”¨è¿™äº›æœ€ä½³å®è·µã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªçµæ´»ã€
      å¯é‡ç”¨çš„å¡ç‰‡ç»„ä»¶ã€‚
    </p>

    <Card isUnderline={true}>
      <div class="bg-slate-800 text-white p-6 rounded-[45px] border border-slate-600">
        <h4 class="text-white text-lg font-semibold mb-4">ğŸ“ å®Œæ•´ç»„ä»¶ç¤ºä¾‹</h4>
        <pre class="text-emerald-300 text-sm overflow-x-auto bg-slate-900 p-4 rounded-lg font-mono leading-relaxed"><code>---
// UniversalCard.astro
export interface Props &#123;
  title: string;
  description?: string;
  imageUrl?: string;
  variant?: 'default' | 'featured' | 'minimal';
  hasAction?: boolean;
  actionText?: string;
  actionUrl?: string;
&#125;

const &#123;
  title,
  description,
  imageUrl,
  variant = 'default',
  hasAction = false,
  actionText = 'äº†è§£æ›´å¤š',
  actionUrl = '#'
&#125; = Astro.props;

const cardClasses = &#123;
  default: 'bg-white border border-gray-200',
  featured: 'bg-gradient-to-br from-blue-50 to-indigo-100 border-2 border-blue-200',
  minimal: 'bg-transparent'
&#125;;
---

&lt;div class=&#123;`rounded-[45px] p-6 $&#123;cardClasses[variant]&#125; shadow-lg hover:shadow-xl transition-shadow`&#125;&gt;
  &#123;imageUrl && (
    &lt;img src=&#123;imageUrl&#125; alt=&#123;title&#125; class="w-full h-48 object-cover rounded-lg mb-4" /&gt;
  )&#125;
  
  &lt;h3 class="text-xl font-bold text-primary mb-2"&gt;&#123;title&#125;&lt;/h3&gt;
  &#123;description && (
    &lt;p class="text-dark mb-4"&gt;&#123;description&#125;&lt;/p&gt;
  )&#125;
  
  &lt;slot /&gt;
  
  &#123;hasAction && (
    &lt;a href=&#123;actionUrl&#125; class="inline-block bg-accent text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-colors"&gt;
      &#123;actionText&#125;
    &lt;/a&gt;
  )&#125;
&lt;/div&gt;</code></pre>
      </div>
    </Card>
  </div>

  <!-- æ€»ç»“éƒ¨åˆ† -->
  <div class="my-16">
    <Card isUnderline={true}>
      <div class="p-8 bg-gradient-to-r from-background to-gray rounded-[45px] text-center border border-accent">
        <h3 class="text-3xl font-bold text-primary mb-6">ğŸ¯ æ€»ç»“</h3>
        <p class="text-lg text-dark mb-6 leading-relaxed">
          Astro ç»„ä»¶å¼€å‘çš„æœ€ä½³å®è·µæ˜¯ä¸€ä¸ªæŒç»­å­¦ä¹ çš„è¿‡ç¨‹ã€‚
          é€šè¿‡éµå¾ªè¿™äº›åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºé«˜æ€§èƒ½ã€å¯ç»´æŠ¤çš„ç°ä»£ç½‘ç«™ã€‚
          è®°ä½ï¼Œå¥½çš„ç»„ä»¶ä¸ä»…è¦åŠŸèƒ½å®Œå–„ï¼Œæ›´è¦æ˜“äºç†è§£å’Œæ‰©å±•ã€‚
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <button class="bg-accent text-white px-8 py-3 rounded-full font-semibold hover:bg-opacity-90 transition-colors interactive-btn">
            æŸ¥çœ‹æ›´å¤šç¤ºä¾‹
          </button>
          <button class="border-2 border-accent text-accent px-8 py-3 rounded-full font-semibold hover:bg-accent hover:text-white transition-colors interactive-btn">
            åŠ å…¥è®¨è®º
          </button>
        </div>
      </div>
    </Card>
  </div>

</BlogLayout>

<style>
  .interactive-btn {
    transform: scale(1);
    transition: transform 0.2s ease;
  }
  
  .interactive-btn:hover {
    transform: scale(1.05);
  }
  
  .interactive-btn:active {
    transform: scale(0.95);
  }
</style>

<script>
  const handleButtonClick = function(this: HTMLButtonElement, e: MouseEvent) {
    e.preventDefault();
    
    // åˆ›å»ºæ¶Ÿæ¼ªæ•ˆæœ
    const ripple = document.createElement('span');
    const rect = this.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    const x = e.clientX - rect.left - size / 2;
    const y = e.clientY - rect.top - size / 2;
    
    ripple.style.width = ripple.style.height = size + 'px';
    ripple.style.left = x + 'px';
    ripple.style.top = y + 'px';
    ripple.classList.add('ripple');
    
    this.appendChild(ripple);
    
    setTimeout(() => {
      ripple.remove();
    }, 600);
    
    // æ¨¡æ‹Ÿé¡µé¢è·³è½¬æˆ–æ“ä½œ
    setTimeout(() => {
      alert('åŠŸèƒ½æ¼”ç¤ºï¼š' + this.textContent);
    }, 200);
  };

  document.addEventListener('DOMContentLoaded', function() {
    // æ·»åŠ æŒ‰é’®äº¤äº’æ•ˆæœ
    document.querySelectorAll('.interactive-btn').forEach(button => {
      button.addEventListener('click', handleButtonClick as (this: HTMLButtonElement, ev: Event) => any);
    });

    console.log('Astro ç»„ä»¶æœ€ä½³å®è·µæ–‡ç« å·²åŠ è½½ï¼');
  });
</script>

<style is:global>
  .ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(0);
    animation: ripple-animation 0.6s linear;
    pointer-events: none;
  }
  
  @keyframes ripple-animation {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }
</style>